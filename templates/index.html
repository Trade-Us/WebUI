<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <!-- Boot Strap Link -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
  <title>주식 가격예측 Trading Bot</title>
  <!-- Import Styles -->
  <link rel="stylesheet" href="./assets/styles.css" />
  <link rel="stylesheet" type="text/css" href="(( url_for('static', filename = 'index_test.css') ))">

  <!-- Import Vue.js -->
  <script src="https://unpkg.com/vue@3.0.0-beta.12/dist/vue.global.js"></script>
  <!--<script src="https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.js"></script>-->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js"></script>

</head>

<body>
  <div>
    <!-- Title 및 프로젝트 설명 -->
    <div class="wrap">
      <header>
        <br>
        <div class="innerHeader">
          <h1 class="logo"><a href="#"><span style="color:orangered">DQN</span>을 활용한 가격 예측</a></h1>
        </div>

        <div class="related">
          <a href="#">
            <p></p>
          </a>
          <a href="#">
            <p></p>
          </a>
        </div>
        <br><br><br><br>
        <h4 style="text-align: center;">AI를 활용한 주식 가격 예측 및 수익을 극대화 하는 주식 Trading Bot 개발</h3>
      </header>

      <br>

    </div>
    <!-- Title 및 프로젝트 설명 -->

    <!-- 파일 첨부란 작성 -->
    <br><br><br>
    <div class="input-train-file"
      style=" background: lightgray; border-radius: 10px; left: 50%; margin-right:20%;margin-left: 20%; margin-top: 10px;">
      <form action="/predict" method="POST" enctype="multipart/form-data">
        <label for="trainFile" style="margin:10px">훈련데이터 파일을 업로드 해주세요 (.csv)</label></br>
        <input style="margin: 10px; " type="file" id="trainFile" name="trainFile" accept=".csv">
        <input type="submit" style="float: right; margin:10px; width: 100px" value="훈련 시작">
      </form>
    </div>
    <!-- 파일 첨부란 작성 -->

    <!-- LSTM 결과 및 Trading BOt 실행 버튼 -->

    <br><br><br>
    <div class="chart-container" style="width: 60%;margin-top: 3rem; margin-left: 20%; margin-right: 20%;">
      <canvas id="myChart"></canvas>
      {%if labe%}
      <script>
        var ctx = document.getElementById('myChart');
        var myChart = new Chart(ctx, {
          type: 'line',
          data: {
            labels: ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '10'],
            datasets: [{
              label: '10일 예측 결과',
              data: [
                ((labe[0])),
                ((labe[1])),
                ((labe[2])),
                ((labe[3])),
                ((labe[4])),
                ((labe[5])),
                ((labe[6])),
                ((labe[7])),
                ((labe[8])),
                ((labe[9]))
              ],
              backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
              ],
              borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)',
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)'
              ],
              borderWidth: 1
            }]
          },
          options: {
            scales: {
              yAxes: [{
                ticks: {
                  beginAtZero: true
                }
              }]
            }
          }
        });
      </script>
      {%endif%}
    </div>
    <br>


    <form id="dqn" action="/predict/DQN" method="POST" enctype="multipart/form-data">
      <div class="trading_bot_start"
        style=" text-align:center; width: 60%;margin-top: 3rem; margin-left: 20%; margin-right: 20%;">
        <button>
          <input style="background: #004fff; border: none;" type="submit" value="Start Trading"></input>
        </button>
      </div>
    </form>
    <!-- LSTM 결과 및 Trading BOt 실행 버튼 -->

    <!-- Trading 결과 -->
    <div style="margin-top: 3rem; margin-left: 20%; margin-right: 20%;">
      <table class="table table-hover" v-if=1>
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Date</th>
            <th scope="col">Action</th>
            <th scope="col">Profit</th>
          </tr>
        </thead>
        <tbody>
          {% for result in dqnResult%}
          <tr>
            <th scope="row"> ((loop.index)) </th>
            <td> (( result[0] )) </td>
            <td> (( result[1] )) </td>
            <td> (( result[2] )) </td>
          </tr>
          {% endfor %}

        </tbody>
      </table>
    </div>

    <br><br><br><br>
    <!-- Trading 결과 -->
  </div>
</body>

</html>
